# vi:syntax=python
from pushlib.modules.python import *
from pushlib.modules.jshint import *
env.nocref_path = "toolop-example"
env.virtualenv = "example-web"


class BuildTask(BuildTask):
    def after(self, c):
        super().after(c)

        # move bin to sbin
        with c.cd(env.release_dir):
            c.run("mv bin sbin", hide=True)


class TestTask(TestTask):
    def after(self, c):
        super().after(c)
        JSHintTask()


class DeployTask(DeployTask):
    def before(self):
        super().before()

        # remove this program's python files from the remote host
        self.clean("{}/example".format(env.python_release_lib_dir))
